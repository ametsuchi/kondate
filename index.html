<!DOCTYPE html>
<html ng-app="app">
  <head>
    <link rel="stylesheet" href="https://cdn.rawgit.com/mblode/marx/master/css/marx.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
    <style>

      textarea{
        width: 80%;
      }
    </style>
  </head>
  <body>
    <main ng-controller="appController">
      <h1>Write Menu Here!</h1>
      <h2 id="date"></h2>
      <div>
        <a href="#">⇐ prev date</a>|<a href="#">next date ⇒</a>
      </div>

      <h3>Morning</h3>
      <ul>
        <li ng-repeat="m_row in data.morning">{{m_row.text}}</li>
      </ul>
      <div>
        <input ng-model="m_text"><button type="button" ng-click="add_m()">+</button>
      </div>

      <h3>Lunch</h3>
      <ul>
        <li ng-repeat="l_row in data.lunch">{{l_row.text}}</li>
      </ul>
      <div>
          <input ng-model="l_text"><button type="button" ng-click="add_l()">+</button>
      </div>

      <h3>Dinner</h3>
      <ul>
          <li ng-repeat="d_row in data.dinner">{{d_row.text}}</li>
      </ul>
      <div>
          <input ng-model="d_text"><button type="button" ng-click="add_d()">+</button>
      </div>

    </main>
    <script>
      (function(){
        var now = new Date();
        var date_str = now.getFullYear() + '-' + now.getMonth() + '-' + now.getDate();
        document.getElementById('date').innerText = date_str + "(" + dayToStr(now.getDay()) +")";

    
        function dayToStr(day_number){
          var days = ['日','月','火','水','木','金','土'];
          return days[day_number];
        }
      }());

      var module = angular.module('app',[]);
      
      module.controller('appController',function($scope){
        $scope.data = {morning:[{text:'バナナ'}],lunch:[{text:'りんご'}],dinner:[{text:'ごりら'}]};

        // TODO:localstrageから読み込み


        // click event
        // ---------------
        // 全体的に冗長なのであとでなおす。。。。
        $scope.add_m = function(){
          // TODO:localstrageに書き込み
          $scope.data.morning.push({text:$scope.m_text});
          $scope.m_text = "";
        }
        $scope.add_l = function(){
          // TODO:localstrageに書き込み
          $scope.data.lunch.push({text:$scope.l_text});
          $scope.l_text = "";
        }
        $scope.add_d = function(){
          // TODO:localstrageに書き込み
          $scope.data.dinner.push({text:$scope.d_text});
          $scope.d_text = "";
        }

      });
    </script>
  </body>
</html>  